{% extends 'base.html' %}

{% block title %}Editar Conta Convênio - Abertura de Contas{% endblock %}

{% block content %}
<div class="page-container">
    <div class="page-header">
        <h1><i class="fas fa-edit"></i> Editar Conta Convênio</h1>
        <button type="button" class="btn btn-secondary" onclick="window.location.href='{{ url_for('views.contas_convenio') }}'">
            <i class="fas fa-arrow-left"></i> Voltar
        </button>
    </div>

    <div class="content-card">
        <form method="POST" class="form-container">
            <div class="form-row">
                <div class="form-group">
                    <label for="num_conta">Número da Conta:</label>
                    <input type="text" id="num_conta" name="num_conta" value="{{ conta.num_conta }}" required class="form-control">
                </div>

                <div class="form-group">
                    <label for="dv_conta">Dígito Verificador:</label>
                    <input type="text" id="dv_conta" name="dv_conta" value="{{ conta.dv_conta }}" class="form-control">
                </div>
            </div>

            <div class="form-group">
                <label for="dt_abertura">Data de Abertura:</label>
                <input type="date" id="dt_abertura" name="dt_abertura" value="{{ conta.dt_abertura.strftime('%Y-%m-%d') if conta.dt_abertura else '' }}" required class="form-control">
            </div>

            <div class="form-group">
                <label for="id_remessa">Remessa:</label>
                <select id="id_remessa" name="id_remessa" required class="form-control">
                    {% for remessa in remessas %}
                    <option value="{{ remessa.id_remessa }}" {% if remessa.id_remessa == conta.id_remessa %}selected{% endif %}>
                        {{ remessa.num_processo }} - {{ remessa.nome_proponente }}
                    </option>
                    {% endfor %}
                </select>
            </div>

            <div class="form-group">
                <label for="id_agencia">Agência:</label>
                <select id="id_agencia" name="id_agencia" required class="form-control">
                    {% for agencia in agencias %}
                    <option value="{{ agencia.id_agencia }}" {% if agencia.id_agencia == conta.id_agencia %}selected{% endif %}>
                        {{ agencia.banco_nome }} - {{ agencia.nome_agencia }} ({{ agencia.num_agencia }})
                    </option>
                    {% endfor %}
                </select>
            </div>

            <div class="form-actions">
                <button type="submit" class="btn btn-warning">
                    <i class="fas fa-save"></i> Salvar Alterações
                </button>
                <button type="button" class="btn btn-secondary" onclick="window.location.href='{{ url_for('views.contas_convenio') }}'">
                    <i class="fas fa-times"></i> Cancelar
                </button>
            </div>
        </form>
    </div>
</div>
{% endblock %}